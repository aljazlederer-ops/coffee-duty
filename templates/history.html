{% extends "base.html" %}
{% block content %}

<h1 class="text-2xl font-bold text-gray-800 mb-6">
    Zgodovina izbire dežurnih
</h1>

<div class="bg-white p-6 rounded-xl shadow border border-gray-200">

    <table class="min-w-full divide-y divide-gray-200">
        <thead>
        <tr class="text-left text-gray-500 text-sm">
            <th class="py-3">Datum in ura</th>
            <th class="py-3">Oseba</th>
            <th class="py-3">Tip kave</th>
            <th class="py-3">Vir</th>
            <th class="py-3">Termin</th>
        </tr>
        </thead>

        <tbody class="divide-y divide-gray-100">
        {% for s in history %}
        <tr class="hover:bg-gray-50">

            <!-- Datum -->
            <td class="py-3 whitespace-nowrap">
                {{ s.selected_at.strftime('%d.%m.%Y %H:%M') }}
            </td>

            <!-- Oseba -->
            <td class="py-3 whitespace-nowrap">
                {{ s.person.first_name }} {{ s.person.last_name }}
            </td>

            <!-- Tip kave -->
            <td class="py-3 whitespace-nowrap">
                {% if s.coffee_type %}
                    {{ s.coffee_type.icon }} {{ s.coffee_type.name }}
                {% else %}
                    –
                {% endif %}
            </td>

            <!-- Vir -->
            <td class="py-3 whitespace-nowrap">
                <span class="px-3 py-1 rounded-lg text-sm
                    {% if s.source == 'manual' %}
                        bg-blue-100 text-blue-700
                    {% else %}
                        bg-green-100 text-green-700
                    {% endif %}">
                    {{ s.source }}
                </span>
            </td>

            <!-- Termin -->
            <td class="py-3 whitespace-nowrap capitalize">
                {{ s.slot }}
            </td>

        </tr>
        {% endfor %}
        </tbody>

    </table>
</div>

{% endblock %}
